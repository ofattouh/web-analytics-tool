var wpkqcg_shortcode_curent=new Object,wpkqcg_shortcode_settings=new Object;function wpkqcg_qrcode_sc_gen(e,t){var c=e.value,o=e.type,n=document.getElementById("wpkqcg_shortcode_generator_sc_name").value,r=document.getElementById("wpkqcg_shortcode_generator_sc_name_dynamic").value,_=document.getElementById("wpkqcg_shortcode_generator_fields_default").value,d=JSON.parse(_);0===Object.keys(wpkqcg_shortcode_curent).length&&Object.keys(d).forEach(function(e){wpkqcg_shortcode_curent[e]=d[e]}),"checkbox"!=o||e.checked?(wpkqcg_shortcode_curent[t]=c,"content"===t&&(wpkqcg_shortcode_settings[t]=c)):wpkqcg_shortcode_curent[t]="","dynamic_content"===t&&(wpkqcg_shortcode_curent[t]="",e.checked?wpkqcg_shortcode_settings[t]=c:wpkqcg_shortcode_settings[t]=""),void 0!==wpkqcg_shortcode_settings.dynamic_content&&""!==wpkqcg_shortcode_settings.dynamic_content?(sc_structure_content="]",void 0!==wpkqcg_shortcode_settings.content&&""!=wpkqcg_shortcode_settings.content&&(sc_structure_content+=wpkqcg_shortcode_settings.content,wpkqcg_shortcode_curent.content=""),sc_structure_start="["+r,sc_structure_end="[/"+r+"]"):(sc_structure_content="",void 0!==wpkqcg_shortcode_settings.content&&""!=wpkqcg_shortcode_settings.content&&(wpkqcg_shortcode_curent.content=wpkqcg_shortcode_settings.content),sc_structure_start="["+n,sc_structure_end="]");var s=sc_structure_start;return Object.keys(wpkqcg_shortcode_curent).forEach(function(e){if(""!=wpkqcg_shortcode_curent[e]){"size"!=e||wpkqcg_qrcode_isInt(wpkqcg_shortcode_curent[e])||(wpkqcg_shortcode_curent[e]="");var t=wpkqcg_qrcode_escapeHtml(wpkqcg_shortcode_curent[e]);s+=" "+e+'="'+t+'"'}}),s+=sc_structure_content,s+=sc_structure_end,document.getElementById("wpkqcg_shortcode_generator_display").innerHTML=s,void 0!==wpkqcg_shortcode_settings.dynamic_content&&""!==wpkqcg_shortcode_settings.dynamic_content&&void 0!==wpkqcg_shortcode_settings.content&&""!=wpkqcg_shortcode_settings.content&&(wpkqcg_shortcode_curent.content=wpkqcg_shortcode_settings.content),wpkqcg_qrcode_preview_gen(wpkqcg_shortcode_curent),wpkqcg_qrcode_preview_display(),!1}function wpkqcg_qrcode_escapeHtml(e){return e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#039;")}function wpkqcg_qrcode_isInt(e){var t;return!isNaN(e)&&(0|(t=parseFloat(e)))===t}function wpkqcg_qrcode_preview_gen(e){var t=document.getElementsByClassName("wpkqcg_qrcode"),c=["ecclevel","size","color","bgcolor","content"];if(0!==t.length)for(var o=0;o<t.length;++o){var n=t[o];Object.keys(e).forEach(function(t){c.indexOf(t)>-1&&(document.getElementById(n.id+"_"+t).value=e[t])})}}function wpkqcg_qrcode_preview_display(){var e=document.getElementsByClassName("wpkqcg_qrcode"),t=(document.getElementById("wpkqcg_shortcode_generator_content_post_id").value,document.getElementById("wpkqcg_shortcode_generator_content_url_admin").value),c=document.getElementById("wpkqcg_shortcode_generator_content_url_default").value;if(0!==e.length)for(var o=0;o<e.length;++o){var n=e[o],r=document.getElementById(n.id+"_ecclevel"),_=document.getElementById(n.id+"_size"),d=document.getElementById(n.id+"_color"),s=document.getElementById(n.id+"_bgcolor"),g=document.getElementById(n.id+"_content");wpkqcg_qrcode_isInt(_.value)||(_.value=""),g.value!=t&&""!=g.value||(g.value=c);var a=[n.id,g.value,r.value,_.value,d.value,s.value];wpkqcg_qrcode_encode(a)}""!==g.value?(document.getElementById("wpkqcg_shortcode_generator_preview_img").style.display="block",document.getElementById("wpkqcg_shortcode_generator_preview_permalink_alert").style.display="none",void 0!==wpkqcg_shortcode_settings.dynamic_content&&""!==wpkqcg_shortcode_settings.dynamic_content?(document.getElementById("wpkqcg_shortcode_generator_preview_img").style.display="none",document.getElementById("wpkqcg_shortcode_generator_preview_dynamic_alert").style.display="block"):(document.getElementById("wpkqcg_shortcode_generator_preview_img").style.display="block",document.getElementById("wpkqcg_shortcode_generator_preview_dynamic_alert").style.display="none")):(document.getElementById("wpkqcg_shortcode_generator_preview_img").style.display="none",document.getElementById("wpkqcg_shortcode_generator_preview_permalink_alert").style.display="block")}function wpkqcg_qrcode_preview_download(){var e=document.getElementsByClassName("wpkqcg_qrcode");if(0!==e.length)for(var t=0;t<e.length;++t){var c=wpkqcg_qrcode_b64toBlob(e[t].src.replace("data:image/png;base64,",""),"image/png");if(window.navigator&&window.navigator.msSaveOrOpenBlob)window.navigator.msSaveOrOpenBlob(c,"kaya-qr-code.png");else{var o=URL.createObjectURL(c),n=document.createElement("a");n.style.display="none",n.setAttribute("href",o),n.setAttribute("target","_blank"),n.setAttribute("rel","noopener noreferrer"),n.setAttribute("download","kaya-qr-code.png"),document.body.appendChild(n),n.click(),document.body.removeChild(n),delete n}}}function wpkqcg_qrcode_b64toBlob(e,t,c){t=t||"",c=c||512;for(var o=atob(e),n=[],r=0;r<o.length;r+=c){for(var _=o.slice(r,r+c),d=new Array(_.length),s=0;s<_.length;s++)d[s]=_.charCodeAt(s);var g=new Uint8Array(d);n.push(g)}return new Blob(n,{type:t})}